<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>节流实现</title>
</head>
<style>
    body {
        height: 5000px;
    }
</style>
<body>
    <script>
        let timer = null
        function scroll(e) {
            // console.log('滚动了', e, this)
            timer = setTimeout(() => {
                console.log('取消内部定时器, 内部timer', timer)
                clearTimeout(timer)
            }, 1000)
            console.log(timer, '外部timer')
        }
        // function myThrottle (handle, wait) {
        //     if (typeof handle !== 'function') throw Error('handle must be a funtion')
        //     if (typeof wait === 'undefined') wait = 500
        //     let timer = null
        //     let pre = null
        //     return function (...args) {
        //         let now = new Date()
        //         const interval = wait - (now - pre)
        //         const self = this
        //         if(interval <= 0) {
        //             clearTimeout(timer)
        //             handle.call(this, ...args)
        //             pre = new Date()
        //         } else {
        //             clearTimeout(timer)
        //             timer = setTimeout(() => {
        //                 handle.call(self, ...args)
        //                 pre = new Date()
        //             }, interval);
        //         }
        //     }
        // }
        // window.onscroll = myThrottle(scroll)
        window.onscroll = scroll
    </script>
</body>
</html>